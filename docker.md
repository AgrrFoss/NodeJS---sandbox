# Шпаргалка по DOCKER

у докера внешнийпорт:внутреннийпорт - внутренний порт должен быть уникален в пределах композы.
При запуске докера система ругается на конфликт ВНЕШНИХ портов
Если pgAdmin работает через докер, то он обращается к постгресу внутри контейнера и обращается через postgres:ВНУТРЕННИЙпорт
18:50 - про сохранение данных в докере, не совсем уловил суть.
19:00 - про отключение автозапуска
`systemctl disable docker` - Отключить автозапуск докера.
`systemctl enable docker` - Добавить докер в автозапуск

`docker compose ps` - работает только в каталоге, в котором лежит файл ямл и показывает только связанные с ним композы
`docker ps` - работает во всей системе и показывает все запущенные контейнеры.
`docker ps -a` - показывает вообще все контейнеры.

## Файлы  docker-compose.yaml  и dockerfile

в dockerfile описывается, что мы хотим сделать на основе существующего образа.
Чтобы разобраться с этим файлом можно посмотреть лекцию по докеру, ссылка на который была в чате когда проходили докер.

19:40  - yaml - файлы - это обычно конфиги, надо читать, что значит это расширение и как его использовать.
## Делаем проект, который будет универсально запускаться. 19:44
Задаем container_name: ___ каждому контейнеру, чтобы его было проще найти. Остановив предыдущую конпозу запускаем новую, чтобы не было конфликтов портов.

docker ps - просмотр работающих контейнеров
В каталоге с yaml `docker compose up -d` поднимет контейнеры из файла
`docker compose stop -d` - Остановит работу контейнеров
`docker compose start -d` - Запустить остановленные контейнеры

### Docker volumes
Образы можно брать на Docker.hub, там-же можно найти пример с __volumes__

`docker rmi` (remove image) - Удаляет лишний образ
```
    ports:
      - 5432:5432
    volumes:
      - ./data:/var/lid/postgresql/data
```
добавив следующий кусок кода, мы задаем докеру задачу, хранить данны не внутри себя  
(тогда мы не имеем к ним доступа и при выполнении `docker compose down` мы все данные потеряем), а внутри указанной  
папки, тогда подняв контейнер мы получаем БД с сохранившейся информацией.